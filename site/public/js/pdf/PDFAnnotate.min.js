PDFAnnotate.default&&(PDFAnnotate=PDFAnnotate.default);let PAGE_HEIGHT,documentId="example.pdf",RENDER_OPTIONS={documentId:documentId,pdfDocument:null,scale:parseFloat(localStorage.getItem(`${documentId}/scale`),10)||1.33,rotate:parseInt(localStorage.getItem(`${documentId}/rotate`),10)||0};PDFAnnotate.setStoreAdapter(new PDFAnnotate.LocalUserStoreAdapter("")),pdfjsLib.GlobalWorkerOptions.workerSrc="vendor/pdfjs/pdf.worker.min.js";let NUM_PAGES=0,renderedPages=[],okToRender=!1;function render(){$.ajax({type:"POST",url:"http://192.168.56.101/index.php?semester=f18&course=sample&component=misc&page=base64_encode_pdf",data:{gradeable_id:"open_homework",user_id:"instructor",file_name:"toy_eb.pdf"},success:function(e){RENDER_OPTIONS.documentId="toy_eb.pdf",documentId="toy_eb".pdf;let t=JSON.parse(e);t=atob(t),pdfjsLib.getDocument({data:t}).then(e=>{RENDER_OPTIONS.pdfDocument=e;let t=document.getElementById("viewer");t.innerHTML="",NUM_PAGES=e.pdfInfo.numPages;for(let e=0;e<NUM_PAGES;e++){let o=PDFAnnotate.UI.createPage(e+1);t.appendChild(o)}PDFAnnotate.UI.renderPage(1,RENDER_OPTIONS).then(([e,t])=>{let o=e.getViewport(RENDER_OPTIONS.scale,RENDER_OPTIONS.rotate);PAGE_HEIGHT=o.height})})}})}document.getElementById("content-wrapper").addEventListener("scroll",function(e){let t=Math.round(e.target.scrollTop/PAGE_HEIGHT)+1,o=document.querySelector(`.page[data-page-number="${t}"][data-loaded="false"]`);-1==renderedPages.indexOf(t)?(okToRender=!0,renderedPages.push(t)):okToRender=!1,o&&okToRender&&setTimeout(function(){PDFAnnotate.UI.renderPage(t,RENDER_OPTIONS)})}),render(),function(){let e=localStorage.getItem(`${RENDER_OPTIONS.documentId}/hotspot/color`)||"darkgoldenrod",t=void 0;initColorPicker(document.querySelector(".hotspot-color"),e,function(o){if(o===e)return;if(localStorage.setItem(`${RENDER_OPTIONS.documentId}/hotspot/color`,o),e=o,PDFAnnotate.UI.setArrow(10,e),PDFAnnotate.UI.setCircle(10,e),!t)return;let n=t.getAttribute("data-pdf-annotate-type"),a=t.getAttribute("data-pdf-annotate-id");-1!==["fillcircle","arrow"].indexOf(n)&&(t.setAttribute("stroke",e),t.setAttribute("fill",e),PDFAnnotate.getStoreAdapter().getAnnotation(documentId,a).then(t=>{t.color=e,PDFAnnotate.getStoreAdapter().editAnnotation(documentId,a,t)}))}),PDFAnnotate.UI.addEventListener("annotation:click",function(o){let n=o.getAttribute("data-pdf-annotate-type");if(-1===["fillcircle","arrow"].indexOf(n))return;e=(t=o).getAttribute("stroke"),PDFAnnotate.UI.setArrow(10,e),PDFAnnotate.UI.setCircle(10,e);let a=document.querySelector(".hotspot-color .color");a&&(a.setAttribute("data-color",e),a.style.background=e)}),PDFAnnotate.UI.addEventListener("annotation:blur",function(e){t===e&&(t=void 0)})}(),function(){let e,t;function o(o,n){let a=!1;if(e!==o&&(a=!0,e=o,localStorage.setItem(`${RENDER_OPTIONS.documentId}/text/size`,e),document.querySelector(".toolbar .text-size").value=e),t!==n){a=!0,t=n,localStorage.setItem(`${RENDER_OPTIONS.documentId}/text/color`,t);let e=document.querySelector(".toolbar .text-color.color-selected");e&&(e.classList.remove("color-selected"),e.prop("aria-selected",!1)),(e=document.querySelector(`.toolbar .text-color[data-color="${n}"]`))&&(e.classList.add("color-selected"),e.prop("aria-selected",!0))}a&&PDFAnnotate.UI.setText(e,t)}document.querySelector(".toolbar .text-size").addEventListener("change",function(e){o(e.target.value,t)}),function(){let n=document.querySelector(".toolbar .text-size");[8,9,10,11,12,14,18,24,30,36,48,60,72,96].forEach(e=>{n.appendChild(new Option(e,e))}),o(localStorage.getItem(`${RENDER_OPTIONS.documentId}/text/size`)||10,localStorage.getItem(`${RENDER_OPTIONS.documentId}/text/color`)||"#000000"),initColorPicker(document.querySelector(".text-color"),t,function(t){o(e,t)})}()}(),function(){let e,t;function o(o,n){let a=!1;if(e!==o&&(a=!0,e=o,localStorage.setItem(`${RENDER_OPTIONS.documentId}/pen/size`,e),document.querySelector(".toolbar .pen-size").value=e),t!==n){a=!0,t=n,localStorage.setItem(`${RENDER_OPTIONS.documentId}/pen/color`,t);let e=document.querySelector(".toolbar .pen-color.color-selected");e&&(e.classList.remove("color-selected"),e.removeAttribute("aria-selected")),(e=document.querySelector(`.toolbar .pen-color[data-color="${n}"]`))&&(e.classList.add("color-selected"),e.setAttribute("aria-selected",!0))}a&&PDFAnnotate.UI.setPen(e,t)}document.querySelector(".toolbar .pen-size").addEventListener("change",function(e){o(e.target.value,t)}),function(){let n=document.querySelector(".toolbar .pen-size");for(let e=0;e<20;e++)n.appendChild(new Option(e+1,e+1));o(localStorage.getItem(`${RENDER_OPTIONS.documentId}/pen/size`)||1,localStorage.getItem(`${RENDER_OPTIONS.documentId}/pen/color`)||"#000000"),initColorPicker(document.querySelector(".pen-color"),t,function(t){o(e,t)})}()}(),function(){let e=localStorage.getItem(`${RENDER_OPTIONS.documentId}/tooltype`)||"cursor";function t(t,o){let n=document.querySelector(".toolbar button.active");if(n)switch(n.classList.remove("active"),e){case"cursor":PDFAnnotate.UI.disableEdit();break;case"draw":PDFAnnotate.UI.disablePen();break;case"arrow":PDFAnnotate.UI.disableArrow();break;case"text":PDFAnnotate.UI.disableText();break;case"point":PDFAnnotate.UI.disablePoint();break;case"area":case"highlight":case"strikeout":PDFAnnotate.UI.disableRect();break;case"circle":case"emptycircle":case"fillcircle":PDFAnnotate.UI.disableCircle()}switch(o&&o.classList.add("active"),e!==t&&localStorage.setItem(`${RENDER_OPTIONS.documentId}/tooltype`,t),e=t,t){case"cursor":PDFAnnotate.UI.enableEdit();break;case"draw":PDFAnnotate.UI.enablePen();break;case"arrow":PDFAnnotate.UI.enableArrow();break;case"text":PDFAnnotate.UI.enableText();break;case"point":PDFAnnotate.UI.enablePoint();break;case"area":case"highlight":case"strikeout":PDFAnnotate.UI.enableRect(t);break;case"circle":case"emptycircle":case"fillcircle":PDFAnnotate.UI.enableCircle(t)}}e&&t(e,document.querySelector(`.toolbar button[data-tooltype=${e}]`)),document.querySelector(".toolbar").addEventListener("click",function(e){"BUTTON"===e.target.nodeName&&t(e.target.getAttribute("data-tooltype"),e.target)})}(),function(){function e(e,t){e=parseFloat(e,10),t=parseInt(t,10),RENDER_OPTIONS.scale===e&&RENDER_OPTIONS.rotate===t||(RENDER_OPTIONS.scale=e,RENDER_OPTIONS.rotate=t,localStorage.setItem(`${RENDER_OPTIONS.documentId}/scale`,RENDER_OPTIONS.scale),localStorage.setItem(`${RENDER_OPTIONS.documentId}/rotate`,RENDER_OPTIONS.rotate%360),render())}document.querySelector(".toolbar select.scale").value=RENDER_OPTIONS.scale,document.querySelector(".toolbar select.scale").addEventListener("change",function(t){e(t.target.value,RENDER_OPTIONS.rotate)}),document.querySelector(".toolbar .rotate-ccw").addEventListener("click",function(){e(RENDER_OPTIONS.scale,RENDER_OPTIONS.rotate-90)}),document.querySelector(".toolbar .rotate-cw").addEventListener("click",function(){e(RENDER_OPTIONS.scale,RENDER_OPTIONS.rotate+90)})}(),document.querySelector("a.clear").addEventListener("click",function(e){if(confirm("Are you sure you want to clear annotations?")){for(let e=0;e<NUM_PAGES;e++)document.querySelector(`div#pageContainer${e+1} svg.annotationLayer`).innerHTML="";localStorage.removeItem(`${RENDER_OPTIONS.documentId}/annotations`)}}),document.querySelector("a.download").addEventListener("click",function(e){alert("hi2")}),function(e,t){let o=t.querySelector("#comment-wrapper .comment-list-container"),n=t.querySelector("#comment-wrapper .comment-list-form"),a=n.querySelector('input[type="text"]');function r(e){let t=e.getAttribute("data-pdf-annotate-type");return["point","highlight","area"].indexOf(t)>-1}function c(e){let n=t.createElement("div");n.className="comment-list-item",n.innerHTML=twitter.autoLink(twitter.htmlEscape(e.content)),o.appendChild(n)}PDFAnnotate.UI.addEventListener("annotation:click",function(e){if(r(e)){let t=e.parentNode.getAttribute("data-pdf-annotate-document"),r=e.getAttribute("data-pdf-annotate-id");PDFAnnotate.getStoreAdapter().getComments(t,r).then(e=>{o.innerHTML="",n.style.display="",a.focus(),n.onsubmit=function(){return PDFAnnotate.getStoreAdapter().addComment(t,r,a.value.trim()).then(c).then(()=>{a.value="",a.focus()}),!1},e.forEach(c)})}}),PDFAnnotate.UI.addEventListener("annotation:blur",function(e){r(e)&&(o.innerHTML="",n.style.display="none",n.onsubmit=null,c({content:"No comments"}))}),PDFAnnotate.UI.setArrow(10,"darkgoldenrod"),PDFAnnotate.UI.setCircle(10,"darkgoldenrod")}(window,document);