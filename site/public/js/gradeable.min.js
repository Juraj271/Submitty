function loadTemplates(){let e=[];return[{id:"GradingGradeable",href:"/templates/grading/GradingGradeable.twig"},{id:"EditGradeable",href:"/templates/grading/EditGradeable.twig"},{id:"Gradeable",href:"/templates/grading/Gradeable.twig"},{id:"GradingComponent",href:"/templates/grading/GradingComponent.twig"},{id:"GradingComponentHeader",href:"/templates/grading/GradingComponentHeader.twig"},{id:"EditComponent",href:"/templates/grading/EditComponent.twig"},{id:"EditComponentHeader",href:"/templates/grading/EditComponentHeader.twig"},{id:"Component",href:"/templates/grading/Component.twig"},{id:"Mark",href:"/templates/grading/Mark.twig"},{id:"OverallComment",href:"/templates/grading/OverallComment.twig"},{id:"TotalScoreBox",href:"/templates/grading/TotalScoreBox.twig"},{id:"ConflictMarks",href:"/templates/grading/ConflictMarks.twig"},{id:"RubricTotalBox",href:"/templates/grading/RubricTotalBox.twig"}].forEach(function(r){e.push(new Promise(function(e,n){Twig.twig({id:r.id,href:r.href,allowInlineIncludes:!0,async:!0,error:function(){n()},load:function(){e()}})}))}),Promise.all(e)}function calculateGradedComponentTotalScore(e,r){let n=0,i=e.default;if(r.custom_mark_selected&&(i+=r.custom_mark_selected&&!isNaN(r.score)?r.score:0,n++),e.marks.forEach(function(e){r.mark_ids.includes(e.id)&&(i+=e.points,n++)}),0!==n)return Math.min(e.upper_clamp,Math.max(i,e.lower_clamp))}function prepGradedComponent(e,r){if(void 0!==r)return void 0===r.custom_mark_selected&&(r.custom_mark_selected=""!==r.comment),void 0===r.total_score&&(r.total_score=calculateGradedComponentTotalScore(e,r)),""===r.grader_id&&(r.grader_id=void 0),""===r.verifier_id&&(r.verifier_id=void 0),r}function renderGradingGradeable(e,r,n,i,o,t){return void 0===n.graded_components&&(n.graded_components={}),r.components.forEach(function(e){n.graded_components[e.id]=prepGradedComponent(e,n.graded_components[e.id])}),Twig.twig({ref:"GradingGradeable"}).render({gradeable:r,graded_gradeable:n,edit_marks_enabled:!1,grading_disabled:i,decimal_precision:DECIMAL_PRECISION,can_verify_graders:o,grader_id:e,display_version:t})}function renderGradingComponent(e,r,n,i,o,t,d,a,c){return new Promise(function(l,m){n=prepGradedComponent(r,n),l(Twig.twig({ref:"GradingComponent"}).render({component:r,graded_component:n,precision:t,edit_marks_enabled:d,show_mark_list:a,grading_disabled:i,decimal_precision:DECIMAL_PRECISION,can_verify_graders:o,grader_id:e,component_version_conflict:c}))})}function renderGradingComponentHeader(e,r,n,i,o,t,d){return new Promise(function(a,c){n=prepGradedComponent(r,n),a(Twig.twig({ref:"GradingComponentHeader"}).render({component:r,graded_component:n,show_verify_grader:o&&showVerifyComponent(n,e),show_mark_list:t,grading_disabled:i,decimal_precision:DECIMAL_PRECISION,component_version_conflict:d}))})}function renderInstructorEditGradeable(e){return Twig.twig({ref:"EditGradeable"}).render({gradeable:e,edit_marks_enabled:!0,decimal_precision:DECIMAL_PRECISION,export_components_url:buildCourseUrl(["gradeable",e.id,"components","export"])})}function renderEditComponent(e,r,n){return new Promise(function(i,o){i(Twig.twig({ref:"EditComponent"}).render({component:e,precision:r,show_mark_list:n,edit_marks_enabled:!0,decimal_precision:DECIMAL_PRECISION}))})}function renderEditComponentHeader(e,r){return new Promise(function(n,i){n(Twig.twig({ref:"EditComponentHeader"}).render({component:e,extra_credit_points:e.upper_clamp-e.max_value,penalty_points:0-e.lower_clamp,show_mark_list:r,decimal_precision:DECIMAL_PRECISION}))})}function renderOverallComment(e,r){return new Promise(function(n,i){n(Twig.twig({ref:"OverallComment"}).render({overall_comment:e,editable:r,grading_disabled:!1}))})}function renderTotalScoreBox(e){return new Promise(function(r,n){e.decimal_precision=DECIMAL_PRECISION,r(Twig.twig({ref:"TotalScoreBox"}).render(e))})}function renderRubricTotalBox(e){return new Promise(function(r,n){e.decimal_precision=DECIMAL_PRECISION,r(Twig.twig({ref:"RubricTotalBox"}).render(e))})}function renderConflictMarks(e){return new Promise(function(r,n){r(Twig.twig({ref:"ConflictMarks"}).render({conflict_marks:e,decimal_precision:DECIMAL_PRECISION}))})}DECIMAL_PRECISION=2;